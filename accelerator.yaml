accelerator:
  displayName: Python Function Buildpacks Accelerator
  description: Python template function powered by Function Buildpacks for Knative
  iconUrl: https://raw.githubusercontent.com/bbtong/functions-accelerator-python/main/functions-icon.png
  tags:
  - python
  - function
  - serverless
  - knative

  # Accelerator GUI
  options:
  - name: functionName
    inputType: text
    label: Default function name
    defaultValue: hello
    required: true
  - name: interfaceType
    inputType: select
    label: Event Type
    choices:
    - value: http
      text: HTTP Function
    - value: cloudevents
      text: CloudEvents Function (Experimental)
    defaultValue: http
    required: true

engine:
  merge:
    - include: [ "func.yaml", "LICENSE", "NOTICE", "DEPLOYING.md", ".gitignore" ]
    - include: [ "src/**" ]
      chain:
      - type: ReplaceText
        substitutions:
        - text: "main"
          with: "#functionName"
    - include: [ "cloudevents/func.py" ]
      condition: "#interfaceType == 'cloudevents'"
      chain:
      - type: ReplaceText
        substitutions:
        - text: "main"
          with: "#functionName"
      - type: RewritePath
        rewriteTo: "'src/func.py'"
    - include: [ "README.md"]
      chain:
      - type: ReplaceText
        substitutions:
        - text: functions-python
          with: "#functionName"
